{% headLink().appendStylesheet(baseUrl('/assets/drive/css/drive.css')) %}
<h2>My drives</h2>

<style>
.file-list {
    list-style: none;
    padding: 0;
    margin: 0;
}
.file-list li {
    margin: 0;
    padding: 8px 0;
}
.file-list li + li {
    border-top: 1px solid #ccc;
}
</style>
{% if drive %}
<div class="panel">
    <div class="panel-heading">

    {% if shared_files %}
        <a class="btn btn-primary btn-small pull-right" style="position:relative;top:-3px;" href="{{ routeUrl('drive.browser', {path: '/' ~ drive.root_dir }) }}">Browse files</a>
    {% else %}
        <span class="btn btn-small disabled pull-right" style="position:relative;top:-3px;">Browse files</a>
    {% endif %}

        <h3 class="panel-title">My drive</h3>
    </div>
    <div class="panel-body">
    {% if drive_files %}
        <div style="display:table;table-layout:fixed;width:100%;">
            <div style="width:50%;display:table-cell;padding-right:20px;">
                <h4>Last uploaded files</h4>
            <ul class="file-list">
            {% for file in drive_files %}
            <li>
                <i class="drive-icon drive-icon{{ file.filter }}"></i>
                {{ routeLink(file.name, 'drive.file', {action: 'read', file_id: file.file_id}) }}
                {{ fileSize(file.size) }}
                {{ fn(file.creator) }}
            </li>
            {% endfor %}
            </ul>
            </div>
            <div style="display:table-cell;width:49%;border-left:1px solid #ccc;padding-left:20px;">
                <h4>Content summary</h4>
                <table border=0 style="width:100%">
                <tr><td>
                            
                {% if drive.quota %}
                    <p>Space limit: <strong>{{ fileSize(drive.quota) }}</strong></p>
                    <p>Disk usage: <strong>{{ fileSize(drive.disk_usage) }}</strong>
                    ({{ (drive.disk_usage / drive.quota) * 100 | number_format(2) }}%)</p>
                {% else %}
                    <p>Disk usage: <strong>{{ fileSize(drive.disk_usage) }}</strong></p>
                {% endif %}
                    <p>Directories: <strong>{{ drive.num_dirs }}</strong></p>
                    <p>Files: <strong>{{ drive.num_files }}</strong></p>
                </td><td>
                    <p>PDF files: <strong>{{ drive.num_by_type.pdf }}</strong></p>
                    <p>Images: <strong>{{ drive.num_by_type.image }}</strong></p>
                    <p>Videos: <strong>{{ drive.num_by_type.video }}</strong></p>
                    <p>Others: <strong>{{ drive.num_by_type.other }}</strong></p>
                </td></tr>
                </table>
            </div>
        </div>
    {% else %}
        <p class="muted">{{ translate('Your drive contains not files') }}</p>
    {% endif %}
    </div>
</div>
{% endif %}

<div class="panel">
    <div class="panel-heading">

    {% if shared_files %}
        <a class="btn btn-primary btn-small pull-right" style="position:relative;top:-3px;" href="{{ routeUrl('drive.browser', {path: '/shared'}) }}">Browse files</a>
    {% else %}
        <span class="btn btn-small disabled pull-right" style="position:relative;top:-3px;">Browse files</a>
    {% endif %}

        <h3 class="panel-title">Shared with me</h3>
    </div>
    <div class="panel-body">
    {% if shared_files %}
        <ul class="file-list">
        {% for file in shared_files %}
            <li>
            <i class="drive-icon drive-icon{{ file.filter }}"></i>
            {{ routeLink(file.name, 'drive.file', {action: 'read', file_id: file.file_id}) }}
            {{ fileSize(file.size) }}
            {{ fn(file.creator) }}
            </li>
        {% endfor %}
        </ul>
    {% else %}
        <p class="muted">{{ translate('No files are currently shared with you') }}</p>
    {% endif %}
    </div>
</div>

<div class="panel">
    <div class="panel-heading">

    {% if shared_files %}
        <a class="btn btn-primary btn-small pull-right" style="position:relative;top:-3px;" href="{{ routeUrl('drive.browser', {path: '/public'}) }}">Browse files</a>
    {% else %}
        <span class="btn btn-small disabled pull-right" style="position:relative;top:-3px;">Browse files</a>
    {% endif %}

        <h3 class="panel-title">Public files</h3>
    </div>
    <div class="panel-body">
    {% if public_files %}
        <ul class="file-list">
        {% for file in public_files %}
            <li>
            <i class="drive-icon drive-icon{{ file.filter }}"></i>
            {{ routeLink(file.name, 'drive.file', {action: 'read', file_id: file.file_id}) }}
            {{ fileSize(file.size) }}
            {{ fn(file.creator) }}
            </li>
        {% endfor %}
        </ul>
    {% else %}
        <p class="muted">{{ translate('No public files found') }}</p>
    {% endif %}
    </div>
</div>

